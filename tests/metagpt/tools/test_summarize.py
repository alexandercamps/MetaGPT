#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
@Time    : 2023/5/2 17:46
@Author  : alexanderwu
@File    : test_summarize.py
"""

import pytest

CASES = [
    """# Context
[{'title': 'Acne / Oil Control / Pore Conditioning Facial Care Products | Watsons', 'href': 'https://www.watsons.com.tw/%E8%87%89%E9%83%A8%E4%BF%9D%E9%A4%8A/%E6%8A%97%E7%97%98-%E6%8E%A7%E6%B2%B9-%E6%AF%9B%E5%AD%94%E8%AA%BF%E7%90%86/c/10410601', 'body': 'Acne / oil control / pore conditioning and other facial care products are available at Watsons, with a wide variety of acne / oil control / pore conditioning products that meet your needs. 3M, 3M Nexcare, ARIN, Biore, CEZANNE and many other recommended brands are available for purchase at Watsons.'}, {'title': 'What acne products have amazed you? - Zhihu', 'href': 'https://www.zhihu.com/question/380098171', 'body': 'What acne products have amazed you? ... Sukijake Salicylic Acid Essence Acne products must not lack salicylic acid! The main reason for using this brand is that it is trusted for its mildness, and it is cheap, effective in removing acne, and effective for closed mouths and blackheads. ... It is convenient to buy. I bought it at Watsons for 50 RMB. Spain IFC duo acne gel ...'}, {'title': 'Watsons Acne Series_ Baidu Knows', 'href': 'https://zhidao.baidu.com/question/581355167.html', 'body': '2014-08-28 What are the good acne products in Watsons? 26 2007-08-25 What acne products are sold at Watsons? 61 2019-05-27 What acne products are available at Watsons? What methods would be better? ?? 2015-09-27 Watsons Platinum Acne Series Usage Order 30 2014-11-03 What is the name of the acne product sold by Watsons? 1 2011-05-24 What are the good acne products at Watsons? ...'}, {'title': 'What are the good acne products in Watsons? - Baidu Knows', 'href': 'https://zhidao.baidu.com/question/360679400530686652.html', 'body': 'Adapalene is a medical series of acne products, containing very rich formic acid compounds, which will have a good anti-inflammatory effect when applied to the skin, and also have a good repair effect on skin problems such as acne, closed mouth, acne, etc. User actual test score: 9.663 points. Laboratory effect evaluation: 9. ...'}, {'title': '33 Watsons Must-Buy Goodies! - Zhihu - Zhihu Column', 'href': 'https://zhuanlan.zhihu.com/p/31366278', 'body': 'Watsons Deep Cleansing Cotton. 19.9 yuan/25*2. Generally, when traveling on business and not wanting to carry many bottles and cans, I would bring cleansing cotton. It was buy one get one free at the time, so it was super cost-effective. The cotton quality is very good, very comfortable, the thickness is moderate, gentle and not irritating, with a faint fragrance, very comfortable to remove makeup, and very clean. Eye makeup can also be removed with this, because it does not contain alcohol, so it is not spicy at all ...'}, {'title': 'Watsons Official Website - Watsons', 'href': 'https://www.watsons.com.cn/', 'body': 'Watsons' century-old genuine reputation, lots of cash discounts, delivered to your home in 2 hours, and you can also pick up at Watsons stores. Beauty makeup and washing care, oral care, daily necessities, men's care, more convenient operation, satisfy you more. Watsons was founded in 1841, and offline stores cover 12 countries and regions around the world, with more than 5500 stores. In China, more than 3000 stores have been opened in more than 400 cities, and 60 million members are shopping with you!'}, {'title': '15 most reputable acne products in Japan! - Zhihu - Zhihu Column', 'href': 'https://zhuanlan.zhihu.com/p/63349036', 'body': 'Rohto. Acnes Medicinal Acne Anti-Acne Powder Dust Pimple Ointment. Medicinal anti-acne ointment with a clear gel texture, vitamin E derivatives, vitamin B6 combination, non-greasy ointment, light and well-absorbed, with a faint fresh fragrance, mainly for red, swollen, and painful large acne, to discharge pus, kill bacteria, and reduce swelling. The next day will be effective. DHC. Acne Cleansing Acne Conditioning Essence. Contains o-Cymen ...'}, {'title': 'What products can be used to remove acne scars at Watsons? - Sina', 'href': 'https://iask.sina.com.cn/b/1STygN4RT2wZ.html', 'body': 'What products can be used to remove acne scars at Watsons? I rarely get acne, and occasionally a few pop up. The acne on my cheeks comes and goes quickly, and doesn't leave scars. It is the acne on the forehead and chin and mouth corners that feels super sensitive, and leaves scars when squeezed. Troubled! ... Want to ask what products at Watsons can remove acne scars, must be effective oh~ Thank you all! ...'}, {'title': 'Watsons New Acne Gel - Watsons Acne Gel 2021 New Style - JD', 'href': 'https://www.jd.com/xinkuan/16729c68245569aae4c3.html', 'body': 'Watsons Aloe Vera Gel Cool and Moisturizing Soothing Acne Print Acne Pit Acne Scar Moisturizing Sun Repair Gel 【Moisturizing Aloe Vera Gel】3 bottles 900g. 2+ Reviews. Watsons Leaf Simple Simple Leaf Salicylic Acid Acne Gel Acne Print Acne Closed Mouth Fades Acne Pit Research Spring Hall Shrinks Pores Improves Acne 2 sticks. 4+ Reviews. Watsons Leaf Simple Simple Leaf Salicylic Acid Acne Gel Acne Print ...'}]

# User search request
What products at Watsons can remove acne?

# Requirements
You are a member of the professional butler team and will provide helpful advice
1. Please summarize the user's search request based on the context, and do not include unrelated text
2. Use [Main Text](quote link) markdown format in the main text to **naturally label** ~5 texts (such as product words or similar text segments) for easy jumping
3. Reply gracefully, clearly, **never repeat text**, write smoothly, and keep the length moderate""",

    """# Context
[{'title': 'What are the recommended delicacies when going to Xiamen? - Zhihu', 'href': 'https://www.zhihu.com/question/286901854', 'body': 'Zhihu, a high-quality Q&A community and original content platform on the Chinese Internet, officially launched in January 2011, with the brand mission of "letting people share knowledge, experience, and insights better, and finding their own answers." Zhihu has gathered high-quality content that is structured and easy to obtain in the fields of Chinese Internet technology, business, film and television ...'}, {'title': 'What are the really worthwhile delicacies in Xiamen? - Zhihu', 'href': 'https://www.zhihu.com/question/38012322', 'body': 'There are a few special dishes that are not easy to taste elsewhere, worth a try~ Often ordered are French toast, satay skewers, sweet and sour pork (personally, I think the Liangshan stall is more skilled~), because I love taro mud, I will also order a taro mud duck~ About 50 yuan per person. Chao Fu City. In the past two years, Xiamen has been operating more and more Hong Kong-style tea restaurants, but the most classic is still Chao Fu City's tea ...'}, {'title': 'Super Full Xiamen Food Guide, Delicious and Affordable, No Pitfalls - Zhihu - Zhihu Column', 'href': 'https://zhuanlan.zhihu.com/p/347055615', 'body': 'Old Xiamen store, taste and hygiene are guaranteed, if you like mango, don't miss mango milk mianmian ice. 285 Oyster Flavor Hall 70/person. Featured on "A Bite of China", no need to say more about the taste, if you want to eat authentic seafood barbecue, come here. Banquet. Old Xiamen private dishes 80/person. Many celebrities have clocked in, appeared on "Twelve Tastes", a good place to eat traditional Xiamen dishes ...'}, {'title': 'Fujian Famous Snacks || Taste Xiamen, Ten Special Snacks, How Many Have You Eaten? - Zhihu', 'href': 'https://zhuanlan.zhihu.com/p/375781836', 'body': 'Episode one, share Xiamen's special delicacies. Xiamen is a scenic tourist city. Many people come to Xiamen, in addition to visiting Xiamen's unique scenery, the most memorable should be Xiamen's special snacks. Xiamen's snacks are diverse, including Xiamen's must-eat sand tea noodles, rice line paste, oyster pancakes, earth bamboo freeze, etc. So, what are the famous snacks in Xiamen?'}, {'title': 'If you go to Xiamen for tourism, there are many delicious foods, but... from Zhuang Shilihe - Weibo', 'href': 'https://weibo.com/1728715190/MEAwzscRT', 'body': 'If you go to Xiamen for tourism, there are many delicious foods, but if you only choose one, I will personally choose fried crab. Eating by the sea, eating crab for Minnan people is a very common thing. Traditional Xiamen practices are mostly steamed or boiled. In the 1980s, a Tong'an person started a fried crab business near Xiamen's Lotus Park.'}, {'title': 'Xiamen Food, Xiamen Food Guide, Xiamen Tourist Food Guide - Mafengwo', 'href': 'https://www.mafengwo.cn/cy/10132/gonglve.html', 'body': 'Drunken No.1 Seafood Stall (Xiamen Food Landmark Store) No.3. DoraEanny's latest review: . Environment is quite retro Minnan style, floral tile floor, the first floor has seafood to order, the second floor indoor seating, the third floor open-air seating, the environment is quite good. . Bitter snail soup, looks quite clear, the snail meat is very crispy. . Ginger... 5.0 points. 482 user reviews.'}, {'title': 'Xiamen Super Strong Zhongshan Road Snack Collection, 29 Authentic Foods Recommended by Locals - Mafengwo', 'href': 'https://www.mafengwo.cn/gonglve/ziyouxing/176485.html', 'body': 'Lianhuan Sea Oyster Pancake. Speaking of Xiamen, I think of oyster pancakes, and this Lianhuan Sea Oyster Pancake located in Zhongshan Road Jukou Street is genuinely delicious!. · In the old alley of Jukou Street, the whole outdoor environment, eating is this feeling. · Named "Lianhuan", hoping that the wife is happy every day. Fresh ingredients, real materials, this kind of heart must be able to please food lovers. · The oysters are ...'}, {'title': '10 Top Restaurants in Xiamen City - Tripadvisor', 'href': 'https://cn.tripadvisor.com/Restaurants-g297407-Xiamen_Fujian.html', 'body': 'Xiamen City Restaurants: Check out reviews of restaurants in Xiamen City, China on Tripadvisor, and search by price, location, and more options. ... "The steak is so delicious!" ... "The oldest and most reputable Chaozhou restaurant in the Xiamen area" ...'}, {'title': '#Fujian 10 Delicious Food Streets Simply Delicious# Every time ... from Sina Xiamen - Weibo', 'href': 'https://weibo.com/1740522895/MF1lY7W4n', 'body': 'You must not miss these 10 food streets in Fujian! Fuzhou Teachers University Student Street, Fuzhou Daming Road Food Street, Xiamen Bashi, Zhangzhou Ancient City Old Street, Ningde Old South Gate Cinema Food Market, Longyan Zhongshan Road Food Street, Sanming Longgang Night Market, Putian Jinding Night Market, Putian Yuhu Night Market, Nanping Jiahe Food Street. Everything in the world is difficult, only food can heal everything.'}, {'title': '50 Restaurants in Xiamen Worth Eating - Tencent News', 'href': 'https://new.qq.com/rain/a/20200114A09HJT00', 'body': 'Nothing can't be solved with a spicy meal! Creative spicy, Sichuan and Hunan spicy, gentle spicy, exotic spicy, Furongjian's dishes can play with chili! ... As early as 2005, this old Southeast Asian restaurant opened in Xiamen's Lotus, and many old Xiamen people feel that this place has the best curry in Xiamen. ...'}, {'title': 'Good-sounding food? What are the good-sounding and delicious foods? - Bilibili', 'href': 'https://www.bilibili.com/read/cv23430069/', 'body': 'Column / Good-sounding food? What are the good-sounding and delicious foods? Good-sounding and delicious foods, what are they? 2023-05-02 18:01 --Reading · --Like · --Comments'}]

# User Search Request
What is delicious in Xiamen?

# Requirements
You are a member of a professional steward team and will give helpful advice
1. Please summarize the user's search request based on the context, without including any irrelevant text
2. Use [main text](reference link) markdown format in the main text to **naturally label** 3-5 texts (such as product words or similar text sections) for easy jumping
3. Reply gracefully, clearly, **never repeat text**, write smoothly, and keep the length moderate"""
]


@pytest.mark.usefixtures("llm_api")
def test_summarize(llm_api):
    pass
